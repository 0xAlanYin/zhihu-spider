# 知乎热点问题采集系统设计

## 项目概述

本项目旨在定期采集知乎热点问题，并将数据存储到本地SQLite数据库中，同时提供简单的前端界面进行数据查看。

## 功能需求

1. 定期爬取知乎热点问题列表(https://www.zhihu.com/hot)
2. 每次采集前20个热点问题，进行去重保存
3. 使用Playwright + cookies方式实现登录
4. 提供简单的前端页面展示采集数据
5. 支持配置cookies、采集数量、采集间隔等参数

## 系统架构

整个系统分为三个主要部分：
1. 爬虫模块：负责采集知乎热点数据
2. 数据存储模块：负责数据的持久化和查询
3. 前端界面：负责数据的可视化展示

## 技术选型

- 后端：Node.js
- 爬虫：Playwright
- 数据库：SQLite
- 前端：React + Ant Design
- 构建工具：Vite

## 数据模型

### 热点问题表(hot_questions)
- id: 主键，自增
- question_id: 知乎问题ID (用于去重)
- title: 问题标题
- url: 问题链接
- excerpt: 问题摘要
- heat: 热度值
- created_at: 采集时间
- rank: 排名位置

### 配置表(configs)
- id: 主键
- key: 配置项名称
- value: 配置项值
- description: 配置说明

## 模块设计

### 1. 爬虫模块
- 使用Playwright模拟浏览器环境
- 使用cookies方式进行登录
- 定时触发爬虫任务
- 提取热点问题的标题、链接、摘要等信息
- 处理可能出现的反爬机制

### 2. 数据存储模块
- 初始化SQLite数据库和表结构
- 实现数据的插入、查询和去重逻辑
- 提供数据访问接口给前端使用

### 3. 前端界面
- 展示热点问题列表
- 支持按时间查询历史数据
- 提供配置界面，可修改cookies、采集频率等参数

## API设计

### 获取热点问题列表
- GET /api/hot-questions
- 查询参数：页码、每页数量、日期范围
- 返回：热点问题列表

### 获取配置项
- GET /api/configs
- 返回：所有配置项

### 更新配置项
- POST /api/configs
- 请求体：配置项键值对
- 返回：更新后的配置项

## 实现计划

1. 搭建项目基础结构
2. 实现数据库初始化和模型定义
3. 开发爬虫模块，实现知乎热点数据采集
4. 实现数据存储和去重逻辑
5. 开发前端界面，实现数据展示和配置功能
6. 集成测试和部署

## 注意事项

- 爬虫行为需要遵守知乎的robots协议
- 合理设置爬取频率，避免对目标网站造成压力
- 确保cookie信息的安全存储
- 考虑知乎页面结构变化的情况，设计灵活的解析逻辑 